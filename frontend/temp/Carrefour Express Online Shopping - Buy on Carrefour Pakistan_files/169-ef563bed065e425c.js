"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{1169:function(e,n,t){t.d(n,{Nw:function(){return E}});var r=t(8788),o=t(865),a=t(6383),u=t(853),c=t(146),i=t(5455),s=t(660),_=t(5451),d=function(){var e=(0,r.Z)((function(e,n){var t,r,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return t=n.language,r=n.sessionId,o=n.storeId,[4,(0,s.g)(s.G.GET_CLP_COMPONENTS_DETAILS_NEW,{componentId:e,storeId:o,language:t},{headers:{token:r,lang:t}},!1).catch((function(e){return{error:e}}))];case 1:return[2,a.sent()]}}))}));return function(n,t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((function(e,n){var t,r,o,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return t=n.language,r=n.sessionId,o=n.storeId,a="brand-store-category",e&&e.includes("carrefour-now")&&(a="self-serve-native-bannerx-carrefournow",e=""),[4,(0,s.g)(s.G.GET_CITRUS_BANNERX_DETAILS,{categoryId:e,storeId:o,language:t,placement:a},{headers:{token:r,lang:t}},!1).catch((function(e){return{error:e}}))];case 1:return[2,u.sent()]}}))}));return function(n,t){return e.apply(this,arguments)}}(),l=function(e,n){return function(){var t=(0,r.Z)((function(t){var r,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return r=n.map((function(e){return e.placementId})).join("|"),[4,c.o8.getRelevanceById(e,r)];case 1:return(o=a.sent())&&o.length&&o.forEach((function(e,r){var o=n[r],a=o.isExpress,u=void 0!==a&&a;if(e){var c=e.productCards.filter((function(e){return e.isAvailable&&(!u||e.isExpress)}));t({type:i.Z.FETCH_CLP_DETAILS_OF_CAROUSEL_COMPONENTS_SUCCESS,payload:{componentId:o.componentId,carouselType:o.carouselType,componentTitle:e.strategyMessage,componentStrategyName:e.strategyName,productCards:c}})}else t({type:i.Z.FETCH_CLP_DETAILS_OF_CAROUSEL_COMPONENTS_ERROR,payload:{componentId:o.componentId}})})),[2]}}))}));return function(e){return t.apply(this,arguments)}}()},C=function(e){return{type:i.Z.FETCH_CLP_COMPONENTS_DETAIL_SUCCESS,payload:e}},E={fetchClpComponents:function(e,n,t,o){return function(){var c=(0,r.Z)((function(r,c){var _,d,p,l,C,E,T,f,g,O,I,y,S,N,h,v;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return d=c(),p=d.appConfig,l=p.sessionId,C=p.areaCode,E=p.storeId,T=p.language,r({type:i.Z.FETCH_CLP_COMPONENTS}),f=o?s.G.GET_PROMO_COMPONENTS:s.G.GET_CLP_COMPONENTS_NEW,g={pageId:e,categoryId:n,areaCode:C,storeId:E,language:T},t&&(f=s.G.GET_CLP_COMPONENTS_NEW_FRAME,O=(0,a.Z)(t.split("/"),4),I=O[2],y=O[3],g={pageId:e,id1:I,id2:y,areaCode:C,storeId:E,language:T}),[4,(0,s.g)(f,g,{headers:{token:l,lang:T}},!1)];case 1:return S=u.sent(),(N=t?S:S.data)&&(null===N||void 0===N||null===(_=N.errors)||void 0===_?void 0:_.length)?r({type:i.Z.FETCH_CLP_COMPONENTS_ERROR}):N&&N.page_components&&(v=o?"PROMO_WITHOUT_CLP":null===(h=N.meta_data[0])||void 0===h?void 0:h.clp_type,r({type:i.Z.FETCH_CLP_COMPONENTS_SUCCESS,payload:{components:N.page_components,meta:{title:N.name,clpType:v}}})),[2]}}))}));return function(e,n){return c.apply(this,arguments)}}()},fetchClpComponentsDetails:function(e,n){return function(){var t=(0,r.Z)((function(t){var r,o,a,c,s,_,p,l,E;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return t({type:i.Z.FETCH_CLP_COMPONENTS_DETAIL,payload:{componentId:e}}),[4,d(e,n)];case 1:return(r=u.sent()).data&&0!==r.data.length?(o=r.data[0],a=o.components,c=void 0===a?null:a,s=o.error,_=void 0!==s&&s,p=o.header,l=void 0===p?"":p,E=o.id,!_&&r&&c&&t(C({componentId:E,details:c,componentTitle:l}))):t({type:i.Z.FETCH_CLP_COMPONENTS_DETAIL_ERROR,payload:{componentId:e,error:r.error||"not found"}}),[2]}}))}));return function(e){return t.apply(this,arguments)}}()},fetchClpDetailsOfCarousels:function(e,n){return function(t){var o=[],a=0;n.forEach(function(){var c=(0,r.Z)((function(r){var c,s,d,p,C,E,T,f,g,O,I,y,S,N,h,v;return(0,u.__generator)(this,(function(u){return t({type:i.Z.FETCH_CLP_DETAILS_OF_CAROUSEL_COMPONENTS,payload:{componentId:r.id}}),c=r.header,s=void 0===c?"":c,d=r.components,p=void 0===d?[]:d,C=r.component_template,E=C.type,T=void 0===E?"":E,r&&p.length?(I=T!==_.dT.PRODUCT_CAROUSEL?"MANUAL":"",y=p[0].placementId_web,S=p[0].product_ids||[],N=null===(f=p[0])||void 0===f?void 0:f.category_id,h=!!(null===(g=p[0])||void 0===g||null===(O=g.filters)||void 0===O?void 0:O.is_express),y&&o.push({componentId:r.id,placementId:y,categoryId:N,carouselType:I,isExpress:h}),S.length&&t({type:i.Z.FETCH_CLP_DETAILS_OF_CAROUSEL_COMPONENTS_SUCCESS,payload:{componentId:r.id,carouselType:I,componentTitle:s,productIds:S}}),a++):t({type:i.Z.FETCH_CLP_DETAILS_OF_CAROUSEL_COMPONENTS_ERROR,payload:{componentId:r.id}}),a===n.length&&o.length&&((null===(v=o[0])||void 0===v?void 0:v.categoryId)?o.forEach((function(e){t(l(e.categoryId,[e]))})):t(l(e,o))),[2]}))}));return function(e){return c.apply(this,arguments)}}())}},fetchDeals:function(e,n,t){return function(){var o=(0,r.Z)((function(r,o){var c,_,d,p,l,C,E,T,f,g,O,I,y,S;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return _=o(),d=_.appConfig,p=d.areaCode,l=d.storeId,C=d.language,r({type:i.Z.FETCH_CLP_COMPONENTS}),E=t?s.G.GET_BRANDS:s.G.GET_DEALS,T={areaCode:p,storeId:l,language:C,brandId:n},e&&(E=s.G.GET_CLP_COMPONENTS_NEW_FRAME,f=(0,a.Z)(e.split("/"),4),g=f[2],O=f[3],T={id1:g,id2:O,areaCode:p,storeId:l,language:C}),[4,(0,s.g)(E,T,{headers:{lang:C}},!1)];case 1:return I=u.sent(),(y=e?I:I.data)&&(null===y||void 0===y||null===(c=y.errors)||void 0===c?void 0:c.length)?r({type:i.Z.FETCH_CLP_COMPONENTS_ERROR}):y&&y.page_components&&(S=t?"BRANDS_WITHOUT_CLP":"DEALS_WITHOUT_CLP",r({type:i.Z.FETCH_CLP_COMPONENTS_SUCCESS,payload:{components:y.page_components,meta:{title:y.name,clpType:S}}})),[2]}}))}));return function(e,n){return o.apply(this,arguments)}}()},fetchClpBannerXDetails:function(e,n,t){return function(){var a=(0,r.Z)((function(r){var a,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r({type:i.Z.FETCH_CLP_COMPONENTS_DETAIL,payload:{componentId:e}}),[4,p(n,t)];case 1:return(a=u.sent())&&0!==a.length?(c=a[0].banners,a&&c&&r(C({componentId:e,details:[(0,o.Z)({__component:_.dT.CITRUS_BANNERX},c[0])],componentTitle:""}))):r({type:i.Z.FETCH_CLP_COMPONENTS_DETAIL_ERROR,payload:{componentId:e,error:a.error||"not found"}}),[2]}}))}));return function(e){return a.apply(this,arguments)}}()},fetchMeta:function(e){return function(){var n=(0,r.Z)((function(n,t){var r,o,a,c,_,d,p,l;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=t(),o=r.appConfig,a=o.areaCode,c=o.storeId,_=o.language,d=s.G.GET_METADATA,p={areaCode:a,storeId:c,language:_,categoryId:e},[4,(0,s.g)(d,p,{headers:{lang:_}},!1)];case 1:return l=u.sent(),n({type:i.v.FETCH_META_SUCCESS,payload:l||{}}),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}()}};t(264)}}]);